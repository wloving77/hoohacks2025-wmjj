<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    ErrorLog /dev/stderr
    CustomLog /dev/stdout common

    # --- OIDC Configuration ---
    OIDCProviderMetadataURL https://accounts.google.com/.well-known/openid-configuration
    OIDCRedirectURI http://localhost:8080/secure/redirect_uri
    OIDCCryptoPassphrase a-random-32-character-string
    OIDCScope "openid email profile"
    OIDCPassClaimsAs environment

    # SetEnv OIDCClientID ${OIDC_CLIENT_ID}
    # SetEnv OIDCClientSecret ${OIDC_CLIENT_SECRET}

    # OIDCClientID ${OIDC_CLIENT_ID}
    # OIDCClientSecret ${OIDC_CLIENT_SECRET}


    # OAUTH STUFF, PAIN

    # <Location "/secure">
    #     AuthType openid-connect
    #     Require valid-user
    # </Location>

    # <Location "/secure/login">
    #     AuthType openid-connect
    #     Require valid-user
    #     Redirect 302 /secure/login /
    # </Location>

    # <Location "/secure/redirect_uri">
    #     AuthType openid-connect
    #     Require valid-user

    #     # Set an environment variable only if the claim exists
    #     SetEnvIfExpr "env('OIDC_CLAIM_email') != ''" SET_USER_EMAIL

    #     # Set the user_email cookie if OIDC_CLAIM_email is present
    #     Header set Set-Cookie "user_email=%{ENV:OIDC_CLAIM_email}e; Path=/; SameSite=Lax" env=SET_USER_EMAIL

    #     # Optional debug headers (can remove later)
    #     Header always set X-Debug-Email "%{ENV:OIDC_CLAIM_email}e"
    #     Header always set X-Debug-Name "%{ENV:OIDC_CLAIM_name}e"
    #     Header always set X-Debug-Sub "%{ENV:OIDC_CLAIM_sub}e"

    #     # Redirect back to homepage after login
    #     Redirect 302 /secure/redirect_uri /
    # </Location>

</VirtualHost>

<!DOCTYPE html>
<html lang="en" class="bg-white">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WhatTheGOV Doin?</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col min-h-screen font-sans text-gray-800">

  <!-- Header -->
  <header class="bg-[#2C3E91] text-white flex justify-between items-center px-6 py-4">
    <div class="flex items-center gap-4">
      <img src="./images/favicon.png" alt="WhatTheGov Logo" class="h-10 w-10" />
      <h1 class="text-xl font-bold">WhatTheGOV Doin?</h1>
    </div>
    <button id="login-button" onclick="window.location.href='/secure/login'" class="border border-white px-4 py-2 rounded hover:bg-white hover:text-[#2C3E91] transition">
      Login/Signup
    </button>
    <script>
      function getCookieValue(name) {
        const cookie = document.cookie
          .split('; ')
          .find(row => row.startsWith(name + '='));
        return cookie ? decodeURIComponent(cookie.split('=')[1]) : null;
      }
      
      function isUserAuthenticated() {
        const email = getCookieValue('user_email');
        return email !== null &&
               email !== '' &&
               email.toLowerCase() !== 'null' &&
               email.toLowerCase() !== '(null)';
      }
    
      window.addEventListener("DOMContentLoaded", () => {
        const loginButton = document.getElementById("login-button");
    
        if (isUserAuthenticated()) {
          const userEmail = getCookieValue('user_email');
          console.log("User is authenticated:", userEmail);
    
          if (loginButton) {
            loginButton.style.display = "none";
          }
    
        } else {
          console.log("User is not authenticated.");
        }
      });
    </script>
    
  </header>

  <!-- Main Content -->
  <main class="flex-1 px-6 py-10 bg-white">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      
      <!-- Common Issues Section -->
      <section class="bg-gray-200 rounded shadow p-4">
        <h2 class="text-lg font-semibold text-center mb-1">Common Issues:</h2>
        <p class="text-xs text-center mb-4">Issues Likely Relevant To Average Users</p>
        
        <div class="space-y-4" id="common-issues">
          <!-- Issue stub -->
          <div class="flex justify-between items-center bg-gray-400 p-4 rounded text-white">
            <a href="#" class="underline hover:text-blue-200">Issue 1 - LLM Summary</a>
            <button class="bg-white text-black px-3 py-1 rounded hover:bg-gray-100">View More</button>
          </div>
          <!-- Clone above block for more issues -->
        </div>
      </section>

      <!-- My Issues Section -->
      <section class="bg-gray-200 rounded shadow p-4">
        <h2 class="text-lg font-semibold text-center mb-4">My Issues:</h2>
        <div id="user-issues" class="bg-gray-400 text-white p-4 rounded text-center">
          Login to Add Issues!
        </div>
      </section>

    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-[#2C3E91] text-white text-center py-3">
    WhatTheGOV Doin?
  </footer>

</body>
</html>

